{"ast":null,"code":"import _regeneratorRuntime from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/satdey/Documents/peachykeen/peachykeen/client/src/components/Main.js\";\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport LoaderButton from \"./LoaderButton\";\nimport logo from './img/Peach-Logo.png';\n\nvar Main =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Main, _Component);\n\n  function Main(props) {\n    var _this;\n\n    _classCallCheck(this, Main);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Main).call(this, props));\n    _this.getDataFromDb =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response, body, names, days, mood;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch('/restaurants');\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return response.json();\n\n            case 5:\n              body = _context.sent;\n\n              _this.setState({\n                data: body,\n                masterData: body\n              });\n\n              names = Array.from(body).map(function (names) {\n                return names.Name;\n              });\n              days = Array.from(body).map(function (days) {\n                return days.Days;\n              });\n              mood = Array.from(body).map(function (mood) {\n                return mood.Mood;\n              });\n              mood = Array.from(new Set(mood));\n\n              _this.setState({\n                restaurantNames: names,\n                isLoading: false,\n                Days: days,\n                Moods: mood\n              });\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.handleChange =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(e) {\n        var data, newData;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _this.setState({\n                  selectedMood: e.target.value\n                });\n\n              case 2:\n                console.log(_this.state.selectedMood);\n\n                if (e.target.value === \"-1\") {\n                  _this.setState({\n                    data: _this.state.masterData\n                  });\n                } else {\n                  data = _this.state.masterData;\n                  newData = [];\n                  data.map(function (restaurant) {\n                    if (restaurant.mood === e.target.value) newData.push(restaurant);\n                  });\n\n                  _this.setState({\n                    data: newData\n                  });\n                }\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.componentDidMount = _this.componentDidMount.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getDataFromDb = _this.getDataFromDb.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.render = _this.render.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      restaurants: [],\n      selectedRestaurant: '',\n      isLoading: false,\n      data: [],\n      restaurantNames: [],\n      detailsOpen: false,\n      restaurantReviews: [],\n      restaurantRating: '',\n      restaurantMood: '',\n      restaurantCity: '',\n      restaurantState: '',\n      detailsHidden: true,\n      restaurantId: '',\n      Days: [],\n      Moods: [],\n      selectedMood: \"-1\",\n      masterData: []\n    };\n    return _this;\n  } //function to contain the fetch\n\n\n  _createClass(Main, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //sets isLoading to true if we want to display some graphics during loading\n      this.setState({\n        isLoading: true\n      }); //fetch pulls all restaurant data into an array\n\n      this.getDataFromDb();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var cards = this.state.data ? this.state.data.map(function (card) {\n        var DaysOfWeek = card.Days.map(function (day) {\n          switch (day) {\n            case \"M\":\n              return React.createElement(\"span\", {\n                className: \"numberCircle\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 82\n                },\n                __self: this\n              }, \" M \");\n\n            case \"T\":\n              return React.createElement(\"span\", {\n                className: \"numberCircle\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 84\n                },\n                __self: this\n              }, \" T \");\n\n            case \"W\":\n              return React.createElement(\"span\", {\n                className: \"numberCircle\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 86\n                },\n                __self: this\n              }, \" W \");\n\n            case \"R\":\n              return React.createElement(\"span\", {\n                className: \"numberCircle\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 88\n                },\n                __self: this\n              }, \" Th \");\n\n            case \"F\":\n              return React.createElement(\"span\", {\n                className: \"numberCircle\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 90\n                },\n                __self: this\n              }, \" F \");\n\n            case \"Sa\":\n              return React.createElement(\"span\", {\n                className: \"numberCircle\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 92\n                },\n                __self: this\n              }, \" Sa \");\n\n            case \"S\":\n              return React.createElement(\"span\", {\n                className: \"numberCircle\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 94\n                },\n                __self: this\n              }, \" S \");\n\n            default:\n              return \"\";\n          }\n        });\n        var restLink = '/restaurant/' + card.id;\n        var openAt = moment(card.Hours[0], 'HH:mm').format('h:mm A');\n        var closeAt = moment(card.Hours[1], 'HH:mm').format('h:mm A');\n        return React.createElement(\"div\", {\n          className: \"col-lg-4 col-md-6 col-sm-12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"card\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"card-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"card-body\",\n          style: {\n            color: 'black'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: restLink,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, \" \", React.createElement(\"span\", {\n          class: \"customH4 card-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, card.Name), \" \"), React.createElement(\"h6\", {\n          class: \"card-subtitle text-muted\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"em em-peach\",\n          title: \"Peachy Rating\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }), card.Rating)), card.Images && card.Images.length > 0 ? React.createElement(\"a\", {\n          href: restLink,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          class: \"img-fluid\",\n          src: \"data:image/jpeg;base64,\" + card.Images[0].image,\n          alt: card.Name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        })) : null, React.createElement(\"div\", {\n          className: \"card-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fas fa-grin-hearts\",\n          title: \"Mood\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }), \"  \", card.Mood, React.createElement(\"i\", {\n          className: \"fas fa-utensils\",\n          title: \"Restaurant Type\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }), \"    \", card.Type), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"caption\",\n          style: {\n            width: '100%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, DaysOfWeek)), React.createElement(\"span\", {\n          className: \"card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, \" \", openAt, \" to \", closeAt, \" \"), React.createElement(\"div\", {\n          className: \"rightSide\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: restLink,\n          className: \"btnHeart\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          class: \"fas fa-heart\",\n          tite: \"favorite\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        })))))));\n      }) : null;\n      var LoadButton = React.createElement(LoaderButton, {\n        block: \"true\",\n        bssize: \"large\",\n        type: \"submit\",\n        isLoading: this.state.isLoading,\n        text: \"Login\",\n        loadingText: \"Data Loading\",\n        id: \"DataLoad\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      });\n      var MoodOptions = React.createElement(\"div\", {\n        className: \"col-3\",\n        id: \"mooddrop\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        className: \"form-control\",\n        value: this.state.selectedMood,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"Anything!\"), this.state.Moods.map(function (mood) {\n        return React.createElement(\"option\", {\n          key: mood,\n          value: mood,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, mood);\n      })));\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"restaurant-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"restaurant-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"image_div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: logo,\n        alt: \"Peaches Logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      })), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \" Welcome to Peachy Keen!\")), React.createElement(\"div\", {\n        className: \"restaurant-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \" What are you in the mood for? \"), MoodOptions), React.createElement(\"div\", {\n        className: \"row match-height\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, this.state.isLoading ? LoadButton : cards))));\n    }\n  }]);\n\n  return Main;\n}(Component);\n\nexport default Main;","map":{"version":3,"sources":["/Users/satdey/Documents/peachykeen/peachykeen/client/src/components/Main.js"],"names":["React","Component","moment","LoaderButton","logo","Main","props","getDataFromDb","fetch","response","json","body","setState","data","masterData","names","Array","from","map","Name","days","Days","mood","Mood","Set","restaurantNames","isLoading","Moods","handleChange","e","selectedMood","target","value","console","log","state","newData","restaurant","push","componentDidMount","bind","render","restaurants","selectedRestaurant","detailsOpen","restaurantReviews","restaurantRating","restaurantMood","restaurantCity","restaurantState","detailsHidden","restaurantId","cards","card","DaysOfWeek","day","restLink","id","openAt","Hours","format","closeAt","color","Rating","Images","length","image","Type","width","LoadButton","MoodOptions"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;;IAEMC,I;;;;;AAEL,gBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AAClB,8EAAMA,KAAN;AADkB,UAmCnBC,aAnCmB;AAAA;AAAA;AAAA;AAAA,6BAmCH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACQC,KAAK,CAAC,cAAD,CADb;;AAAA;AACTC,cAAAA,QADS;AAAA;AAAA,qBAEIA,QAAQ,CAACC,IAAT,EAFJ;;AAAA;AAETC,cAAAA,IAFS;;AAGf,oBAAKC,QAAL,CAAc;AAACC,gBAAAA,IAAI,EAAEF,IAAP;AACNG,gBAAAA,UAAU,EAAEH;AADN,eAAd;;AAEII,cAAAA,KALW,GAKHC,KAAK,CAACC,IAAN,CAAWN,IAAX,EAAiBO,GAAjB,CAAqB,UAAAH,KAAK;AAAA,uBAAIA,KAAK,CAACI,IAAV;AAAA,eAA1B,CALG;AAMXC,cAAAA,IANW,GAMJJ,KAAK,CAACC,IAAN,CAAWN,IAAX,EAAiBO,GAAjB,CAAqB,UAAAE,IAAI;AAAA,uBAAEA,IAAI,CAACC,IAAP;AAAA,eAAzB,CANI;AAOXC,cAAAA,IAPW,GAOJN,KAAK,CAACC,IAAN,CAAWN,IAAX,EAAiBO,GAAjB,CAAqB,UAAAI,IAAI;AAAA,uBAAEA,IAAI,CAACC,IAAP;AAAA,eAAzB,CAPI;AAQfD,cAAAA,IAAI,GAAGN,KAAK,CAACC,IAAN,CAAW,IAAIO,GAAJ,CAAQF,IAAR,CAAX,CAAP;;AACA,oBAAKV,QAAL,CAAc;AACba,gBAAAA,eAAe,EAAEV,KADJ;AAEbW,gBAAAA,SAAS,EAAE,KAFE;AAGbL,gBAAAA,IAAI,EAAED,IAHO;AAIbO,gBAAAA,KAAK,EAAEL;AAJM,eAAd;;AATe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAnCG;;AAAA,UAoDnBM,YApDmB;AAAA;AAAA;AAAA;AAAA;AAAA,+BAoDJ,kBAAOC,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACN,MAAKjB,QAAL,CAAc;AAACkB,kBAAAA,YAAY,EAAED,CAAC,CAACE,MAAF,CAASC;AAAxB,iBAAd,CADM;;AAAA;AAEdC,gBAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWL,YAAvB;;AACA,oBAAID,CAAC,CAACE,MAAF,CAASC,KAAT,KAAmB,IAAvB,EAA4B;AAC3B,wBAAKpB,QAAL,CAAc;AAACC,oBAAAA,IAAI,EAAE,MAAKsB,KAAL,CAAWrB;AAAlB,mBAAd;AACA,iBAFD,MAGI;AACCD,kBAAAA,IADD,GACQ,MAAKsB,KAAL,CAAWrB,UADnB;AAECsB,kBAAAA,OAFD,GAEW,EAFX;AAGHvB,kBAAAA,IAAI,CAACK,GAAL,CAAS,UAAAmB,UAAU,EAAI;AACtB,wBAAIA,UAAU,CAACf,IAAX,KAAoBO,CAAC,CAACE,MAAF,CAASC,KAAjC,EACCI,OAAO,CAACE,IAAR,CAAaD,UAAb;AACD,mBAHD;;AAIA,wBAAKzB,QAAL,CAAc;AAACC,oBAAAA,IAAI,EAAEuB;AAAP,mBAAd;AACA;;AAda;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OApDI;;AAAA;AAAA;AAAA;AAAA;;AAElB,UAAKG,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBC,IAAvB,uDAAzB;AACA,UAAKjC,aAAL,GAAqB,MAAKA,aAAL,CAAmBiC,IAAnB,uDAArB;AACA,UAAKC,MAAL,GAAc,MAAKA,MAAL,CAAYD,IAAZ,uDAAd;AACA,UAAKZ,YAAL,GAAoB,MAAKA,YAAL,CAAkBY,IAAlB,uDAApB;AACA,UAAKL,KAAL,GAAa;AACZO,MAAAA,WAAW,EAAE,EADD;AAEZC,MAAAA,kBAAkB,EAAE,EAFR;AAGZjB,MAAAA,SAAS,EAAE,KAHC;AAIZb,MAAAA,IAAI,EAAE,EAJM;AAKZY,MAAAA,eAAe,EAAE,EALL;AAMZmB,MAAAA,WAAW,EAAE,KAND;AAOZC,MAAAA,iBAAiB,EAAC,EAPN;AAQZC,MAAAA,gBAAgB,EAAC,EARL;AASZC,MAAAA,cAAc,EAAC,EATH;AAUZC,MAAAA,cAAc,EAAE,EAVJ;AAWZC,MAAAA,eAAe,EAAC,EAXJ;AAYZC,MAAAA,aAAa,EAAC,IAZF;AAaZC,MAAAA,YAAY,EAAC,EAbD;AAcZ9B,MAAAA,IAAI,EAAE,EAdM;AAeZM,MAAAA,KAAK,EAAC,EAfM;AAgBZG,MAAAA,YAAY,EAAE,IAhBF;AAiBZhB,MAAAA,UAAU,EAAE;AAjBA,KAAb;AANkB;AAyBlB,G,CAED;;;;;wCACoB;AACnB;AACA,WAAKF,QAAL,CAAc;AAAEc,QAAAA,SAAS,EAAE;AAAb,OAAd,EAFmB,CAGnB;;AACA,WAAKnB,aAAL;AACA;;;6BAoCQ;AACR,UAAM6C,KAAK,GAAG,KAAKjB,KAAL,CAAWtB,IAAX,GAAkB,KAAKsB,KAAL,CAAWtB,IAAX,CAAgBK,GAAhB,CAAoB,UAASmC,IAAT,EAAc;AACjE,YAAIC,UAAU,GAAGD,IAAI,CAAChC,IAAL,CAAUH,GAAV,CAAc,UAASqC,GAAT,EAAa;AAC3C,kBAAOA,GAAP;AACC,iBAAK,GAAL;AACA,qBAAO;AAAM,gBAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAP;;AACA,iBAAK,GAAL;AACA,qBAAO;AAAM,gBAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAP;;AACA,iBAAK,GAAL;AACA,qBAAO;AAAM,gBAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAP;;AACA,iBAAK,GAAL;AACA,qBAAO;AAAM,gBAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAP;;AACA,iBAAK,GAAL;AACA,qBAAO;AAAM,gBAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAP;;AACA,iBAAK,IAAL;AACA,qBAAO;AAAM,gBAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAP;;AACA,iBAAK,GAAL;AACA,qBAAO;AAAM,gBAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAP;;AACA;AACA,qBAAO,EAAP;AAhBD;AAkBA,SAnBgB,CAAjB;AAoBA,YAAIC,QAAQ,GAAG,iBAAeH,IAAI,CAACI,EAAnC;AACA,YAAIC,MAAM,GAAGxD,MAAM,CAACmD,IAAI,CAACM,KAAL,CAAW,CAAX,CAAD,EAAgB,OAAhB,CAAN,CAA+BC,MAA/B,CAAsC,QAAtC,CAAb;AACA,YAAIC,OAAO,GAAG3D,MAAM,CAACmD,IAAI,CAACM,KAAL,CAAW,CAAX,CAAD,EAAgB,OAAhB,CAAN,CAA+BC,MAA/B,CAAsC,QAAtC,CAAd;AACA,eACC;AAAK,UAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAK,UAAA,SAAS,EAAC,WAAf;AAA2B,UAAA,KAAK,EAAE;AAACE,YAAAA,KAAK,EAAE;AAAR,WAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAG,UAAA,IAAI,EAAEN,QAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAoB;AAAM,UAAA,KAAK,EAAC,qBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAmCH,IAAI,CAAClC,IAAxC,CAApB,MADA,EAEA;AAAI,UAAA,KAAK,EAAC,0BAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAqC;AAAG,UAAA,SAAS,EAAE,aAAd;AAA4B,UAAA,KAAK,EAAE,eAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAArC,EAA6FkC,IAAI,CAACU,MAAlG,CAFA,CADA,EAMCV,IAAI,CAACW,MAAL,IAAeX,IAAI,CAACW,MAAL,CAAYC,MAAZ,GAAqB,CAApC,GACC;AAAG,UAAA,IAAI,EAAET,QAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAmB;AAAK,UAAA,KAAK,EAAC,WAAX;AAAuB,UAAA,GAAG,EAAE,4BAA0BH,IAAI,CAACW,MAAL,CAAY,CAAZ,EAAeE,KAArE;AAA4E,UAAA,GAAG,EAAEb,IAAI,CAAClC,IAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAnB,CADD,GAEE,IARH,EAUA;AAAK,UAAA,SAAS,EAAG,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAG,UAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAG,UAAA,SAAS,EAAC,oBAAb;AAAkC,UAAA,KAAK,EAAC,MAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA,QACsDkC,IAAI,CAAC9B,IAD3D,EAEA;AAAG,UAAA,SAAS,EAAC,iBAAb;AAA+B,UAAA,KAAK,EAAC,iBAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFA,UAEgE8B,IAAI,CAACc,IAFrE,CADA,EAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAM,UAAA,SAAS,EAAC,SAAhB;AAA0B,UAAA,KAAK,EAAE;AAACC,YAAAA,KAAK,EAAC;AAAP,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAkDd,UAAlD,CADA,CALA,EAQA;AAAM,UAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAA8BI,MAA9B,UAA0CG,OAA1C,MARA,EASA;AAAK,UAAA,SAAS,EAAG,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAG,UAAA,IAAI,EAAEL,QAAT;AAAmB,UAAA,SAAS,EAAC,UAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAwC;AAAG,UAAA,KAAK,EAAC,cAAT;AAAwB,UAAA,IAAI,EAAC,UAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAxC,CADA,CATA,CAVA,CADA,CADA,CADD;AA8BA,OAtD+B,CAAlB,GAsDX,IAtDH;AAwDC,UAAIa,UAAU,GAAG,oBAAC,YAAD;AACjB,QAAA,KAAK,EAAG,MADS;AAEjB,QAAA,MAAM,EAAC,OAFU;AAGjB,QAAA,IAAI,EAAC,QAHY;AAIjB,QAAA,SAAS,EAAE,KAAKlC,KAAL,CAAWT,SAJL;AAKjB,QAAA,IAAI,EAAC,OALY;AAMjB,QAAA,WAAW,EAAC,cANK;AAOjB,QAAA,EAAE,EAAG,UAPY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAjB;AAUA,UAAI4C,WAAW,GAAG;AAAK,QAAA,SAAS,EAAC,OAAf;AAAuB,QAAA,EAAE,EAAC,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAClB;AAAQ,QAAA,SAAS,EAAG,cAApB;AAAmC,QAAA,KAAK,EAAE,KAAKnC,KAAL,CAAWL,YAArD;AAAmE,QAAA,QAAQ,EAAE,KAAKF,YAAlF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAQ,QAAA,KAAK,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADA,EAGC,KAAKO,KAAL,CAAWR,KAAX,CAAiBT,GAAjB,CAAqB,UAAAI,IAAI,EAAI;AAC5B,eAAO;AAAQ,UAAA,GAAG,EAAEA,IAAb;AAAmB,UAAA,KAAK,EAAEA,IAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAiCA,IAAjC,CAAP;AACA,OAFD,CAHD,CADkB,CAAlB;AAUA,aACC,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAG,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,EAAE,EAAG,WAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,GAAG,EAAElB,IAAV;AAAgB,QAAA,GAAG,EAAC,cAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,CADA,EAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAJA,CADA,EAOA;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CADA,EAECkE,WAFD,CAPA,EAWA;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,KAAKnC,KAAL,CAAWT,SAAX,GAAuB2C,UAAvB,GAAoCjB,KADrC,CAXA,CADA,CADA,CADD;AAqBA;;;;EAzKgBnD,S;;AA4KlB,eAAeI,IAAf","sourcesContent":["import React, { Component } from 'react';\nimport moment from 'moment';\nimport LoaderButton from \"./LoaderButton\";\nimport logo from './img/Peach-Logo.png';\n\nclass Main extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.componentDidMount = this.componentDidMount.bind(this);\n\t\tthis.getDataFromDb = this.getDataFromDb.bind(this);\n\t\tthis.render = this.render.bind(this);\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.state = {\n\t\t\trestaurants: [],\n\t\t\tselectedRestaurant: '',\n\t\t\tisLoading: false,\n\t\t\tdata: [],\n\t\t\trestaurantNames: [],\n\t\t\tdetailsOpen: false,\n\t\t\trestaurantReviews:[],\n\t\t\trestaurantRating:'',\n\t\t\trestaurantMood:'',\n\t\t\trestaurantCity: '',\n\t\t\trestaurantState:'',\n\t\t\tdetailsHidden:true,\n\t\t\trestaurantId:'',\n\t\t\tDays: [],\n\t\t\tMoods:[],\n\t\t\tselectedMood: \"-1\",\n\t\t\tmasterData: []\n\t\t};\n\t}\n\n\t//function to contain the fetch\n\tcomponentDidMount() {\n\t\t//sets isLoading to true if we want to display some graphics during loading\n\t\tthis.setState({ isLoading: true });\n\t\t//fetch pulls all restaurant data into an array\n\t\tthis.getDataFromDb();\n\t}\n\n\tgetDataFromDb = async () => {\n\t\tconst response = await fetch('/restaurants');\n\t\tconst body = await response.json();\n\t\tthis.setState({data: body,\n\t\t\t\t\t\t\t\t\t\tmasterData: body});\n\t\tvar names = Array.from(body).map(names => names.Name);\n\t\tvar days = Array.from(body).map(days=>days.Days);\n\t\tvar mood = Array.from(body).map(mood=>mood.Mood);\n\t\tmood = Array.from(new Set(mood));\n\t\tthis.setState({\n\t\t\trestaurantNames: names,\n\t\t\tisLoading: false,\n\t\t\tDays: days,\n\t\t\tMoods: mood\n\t\t});\n\t};\n\n\thandleChange = async (e) =>{\n    await this.setState({selectedMood: e.target.value});\n\t\tconsole.log(this.state.selectedMood);\n\t\tif (e.target.value === \"-1\"){\n\t\t\tthis.setState({data: this.state.masterData})\n\t\t}\n\t\telse{\n\t\t\tvar data = this.state.masterData;\n\t\t\tvar newData = [];\n\t\t\tdata.map(restaurant => {\n\t\t\t\tif (restaurant.mood === e.target.value)\n\t\t\t\t\tnewData.push(restaurant);\n\t\t\t});\n\t\t\tthis.setState({data: newData});\n\t\t}\n  }\n\n\trender() {\n\t\tconst cards = this.state.data ? this.state.data.map(function(card){\n\t\t\tvar DaysOfWeek = card.Days.map(function(day){\n\t\t\t\tswitch(day) {\n\t\t\t\t\tcase \"M\":\n\t\t\t\t\treturn <span className=\"numberCircle\"> M </span>\n\t\t\t\t\tcase \"T\":\n\t\t\t\t\treturn <span className=\"numberCircle\"> T </span>\n\t\t\t\t\tcase \"W\":\n\t\t\t\t\treturn <span className=\"numberCircle\"> W </span>\n\t\t\t\t\tcase \"R\":\n\t\t\t\t\treturn <span className=\"numberCircle\"> Th </span>\n\t\t\t\t\tcase \"F\":\n\t\t\t\t\treturn <span className=\"numberCircle\"> F </span>\n\t\t\t\t\tcase \"Sa\":\n\t\t\t\t\treturn <span className=\"numberCircle\"> Sa </span>\n\t\t\t\t\tcase \"S\":\n\t\t\t\t\treturn <span className=\"numberCircle\"> S </span>\n\t\t\t\t\tdefault:\n\t\t\t\t\treturn \"\";\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar restLink = '/restaurant/'+card.id;\n\t\t\tvar openAt = moment(card.Hours[0], 'HH:mm').format('h:mm A');\n\t\t\tvar closeAt = moment(card.Hours[1], 'HH:mm').format('h:mm A');\n\t\t\treturn (\n\t\t\t\t<div className=\"col-lg-4 col-md-6 col-sm-12\">\n\t\t\t\t<div className=\"card\">\n\t\t\t\t<div className=\"card-content\">\n\t\t\t\t<div className=\"card-body\" style={{color: 'black'}}>\n\t\t\t\t<a href={restLink}> <span class=\"customH4 card-title\">{card.Name}</span> </a>\n\t\t\t\t<h6 class=\"card-subtitle text-muted\"><i className= \"em em-peach\" title ='Peachy Rating'></i>{card.Rating}</h6>\n\t\t\t\t</div>\n\t\t\t\t{\n\t\t\t\t\tcard.Images && card.Images.length > 0 ?\n\t\t\t\t \t<a href={restLink}><img class=\"img-fluid\" src={\"data:image/jpeg;base64,\"+card.Images[0].image} alt={card.Name}/></a>\n\t\t\t\t\t: null\n\t\t\t  }\n\t\t\t\t<div className = 'card-body'>\n\t\t\t\t<p className=\"card-text\">\n\t\t\t\t<i className=\"fas fa-grin-hearts\" title=\"Mood\"></i>  {card.Mood}\n\t\t\t\t<i className=\"fas fa-utensils\" title=\"Restaurant Type\"></i>    {card.Type}\n\t\t\t\t</p>\n\t\t\t\t<div>\n\t\t\t\t<span className='caption' style={{width:'100%'}}>{DaysOfWeek}</span>\n\t\t\t\t</div>\n\t\t\t\t<span className=\"card-text\"> {openAt} to {closeAt} </span>\n\t\t\t\t<div className = \"rightSide\">\n\t\t\t\t<a href={restLink} className=\"btnHeart\"><i class=\"fas fa-heart\" tite=\"favorite\"></i></a>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)\n\t\t}):null;\n\n\t\t\tvar LoadButton = <LoaderButton\n\t\t\tblock = \"true\"\n\t\t\tbssize=\"large\"\n\t\t\ttype=\"submit\"\n\t\t\tisLoading={this.state.isLoading}\n\t\t\ttext=\"Login\"\n\t\t\tloadingText=\"Data Loading\"\n\t\t\tid = \"DataLoad\"\n\t\t\t/>\n\n\t\t\tvar MoodOptions = <div className=\"col-3\" id=\"mooddrop\">\n\t\t\t<select className = \"form-control\" value={this.state.selectedMood} onChange={this.handleChange}>\n\t\t\t<option value=\"-1\">Anything!</option>\n\t\t\t{\n\t\t\t\tthis.state.Moods.map(mood => {\n\t\t\t\t\treturn <option key={mood} value={mood}>{mood}</option>\n\t\t\t\t})\n\t\t\t}\n\t\t\t</select>\n\t\t\t</div>\n\t\t\treturn (\n\t\t\t\t<React.Fragment>\n\t\t\t\t<div className = \"App\">\n\t\t\t\t<div className=\"restaurant-content\">\n\t\t\t\t<div className=\"restaurant-header\">\n\t\t\t\t<div id = \"image_div\">\n\t\t\t\t<img src={logo} alt=\"Peaches Logo\" />\n\t\t\t\t</div>\n\t\t\t\t<h1> Welcome to Peachy Keen!</h1>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"restaurant-header\">\n\t\t\t\t<p> What are you in the mood for? </p>\n\t\t\t\t{MoodOptions}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"row match-height\">\n\t\t\t\t{this.state.isLoading ? LoadButton : cards}\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\t}\n\n\texport default Main;\n"]},"metadata":{},"sourceType":"module"}