{"ast":null,"code":"import _regeneratorRuntime from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/satdey/Documents/peachykeen/peachykeen/client/src/components/Admin.js\";\nimport React, { Component } from 'react';\nimport LoaderButton from \"./LoaderButton\";\nimport { Link } from 'react-router-dom';\nimport moment from 'moment';\n\nvar Admin =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Admin, _Component);\n\n  function Admin(props) {\n    var _this;\n\n    _classCallCheck(this, Admin);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Admin).call(this, props));\n    _this.state = {\n      isLoggedOn: true,\n      userid: '',\n      password: '',\n      isSuccess: false,\n      isLoading: false,\n      selectedRestaurant: \"-1\",\n      data: '',\n      restaurantData: '',\n      select: 'Reserves'\n    };\n    _this.getDataFromDb =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response, body, _body, array;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.setState({\n                isLoading: true\n              });\n\n              response = \"\";\n\n              if (!(_this.state.selectedRestaurant === null || _this.state.selectedRestaurant === \"-1\")) {\n                _context.next = 13;\n                break;\n              }\n\n              _context.next = 5;\n              return fetch('/restaurants');\n\n            case 5:\n              response = _context.sent;\n              _context.next = 8;\n              return response.json();\n\n            case 8:\n              body = _context.sent;\n\n              _this.setState({\n                data: Array.from(body)\n              });\n\n              _this.setState({\n                restaurantData: Array.from(body)\n              });\n\n              _context.next = 23;\n              break;\n\n            case 13:\n              _context.next = 15;\n              return fetch('/restaurants/' + _this.state.selectedRestaurant);\n\n            case 15:\n              response = _context.sent;\n              _context.next = 18;\n              return response.json();\n\n            case 18:\n              _body = _context.sent;\n              array = [];\n              array.push(_body);\n\n              _this.setState({\n                restaurantData: array\n              });\n\n              console.log(array);\n\n            case 23:\n              _this.setState({\n                isLoading: false\n              });\n\n              console.log(_this.state.restaurantData);\n\n            case 25:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.handleChange =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(e) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _this.setState({\n                  selectedRestaurant: e.target.value\n                });\n\n              case 2:\n                _this.getDataFromDb();\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.handleLogin = function (e) {\n      e.preventDefault();\n\n      if (_this.state.userid === \"admin\" && _this.state.password === \"password\") {\n        _this.setState({\n          isLoggedOn: true,\n          message: \"Login successful! Redirecting now!\",\n          isSuccess: true,\n          color: 'success'\n        });\n\n        _this.getDataFromDb();\n      } else {\n        _this.setState({\n          message: \"Incorrect user name or password\",\n          isSuccess: false,\n          color: 'danger'\n        });\n      }\n    };\n\n    _this.getDataFromDb();\n\n    return _this;\n  }\n\n  _createClass(Admin, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var Login = React.createElement(\"div\", {\n        id: \"admin-login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-3 container align-self-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"Admin Portal\")), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        id: \"warningmessage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \" \", this.state.message, \" \")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-user-alt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        name: \"id\",\n        type: \"text\",\n        placeholder: \"User ID\",\n        value: this.state.email,\n        autoComplete: \"username\",\n        onChange: function onChange(e) {\n          return _this2.setState({\n            userid: e.target.value\n          });\n        },\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-key\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        name: \"password\",\n        type: \"password\",\n        placeholder: \"Password\",\n        value: this.state.password,\n        autoComplete: \"current-password\",\n        onChange: function onChange(e) {\n          return _this2.setState({\n            password: e.target.value\n          });\n        },\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Login\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }))));\n      var LoadButton = React.createElement(LoaderButton, {\n        block: \"true\",\n        bssize: \"large\",\n        type: \"submit\",\n        isLoading: this.state.isLoading,\n        text: \"Login\",\n        loadingText: \"Data Loading\",\n        id: \"DataLoad\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      });\n      var RestDropDown = React.createElement(\"select\", {\n        className: \"form-control\",\n        value: this.state.selectedRestaurant,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"All Restaurants\"), this.state.data ? this.state.data.map(function (restaurant) {\n        return React.createElement(\"option\", {\n          key: restaurant.id,\n          value: restaurant.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, restaurant.Name);\n      }) : \"\");\n      var ReservationTable = React.createElement(\"table\", {\n        className: \"table table-striped table-dark\",\n        id: \"reserveTable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"thead-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Restaurant Name\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"User Name\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Date\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Time\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, this.state.restaurantData ? this.state.restaurantData.map(function (restaurant, index) {\n        return restaurant.Reserve ? restaurant.Reserve.map(function (reserve, index2) {\n          return React.createElement(\"tr\", {\n            key: index + index2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 133\n            },\n            __self: this\n          }, React.createElement(\"th\", {\n            scope: \"row\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 134\n            },\n            __self: this\n          }, restaurant.Name), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 135\n            },\n            __self: this\n          }, reserve.user_name), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 136\n            },\n            __self: this\n          }, reserve.user_id), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 137\n            },\n            __self: this\n          }, moment(reserve.date).format(\"MM/DD/YY\")), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 138\n            },\n            __self: this\n          }, moment(reserve.date).format(\"h:mm a\")));\n        }) : null;\n      }) : null));\n      var ReviewsTable = React.createElement(\"table\", {\n        className: \"table table-striped table-light\",\n        id: \"reserveTable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"thead-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Restaurant Name\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"User Name\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"Date\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Review\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, this.state.restaurantData ? this.state.restaurantData.map(function (restaurant, index) {\n        return restaurant.Reviews ? restaurant.Reviews.map(function (review, index2) {\n          return React.createElement(\"tr\", {\n            key: index + index2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 159\n            },\n            __self: this\n          }, React.createElement(\"th\", {\n            scope: \"row\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 160\n            },\n            __self: this\n          }, restaurant.Name), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 161\n            },\n            __self: this\n          }, review.user_name), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 162\n            },\n            __self: this\n          }, moment(review.date).format(\"MM/DD/YY\")), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 163\n            },\n            __self: this\n          }, review.review));\n        }) : null;\n      }) : null));\n      var Page = React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, RestDropDown), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(Link, {\n        onClick: function onClick(e) {\n          return _this2.setState({\n            select: \"Reserves\"\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"form-title form-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Reservation Table\"))), React.createElement(\"div\", {\n        className: \"col6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(Link, {\n        onClick: function onClick(e) {\n          return _this2.setState({\n            select: \"Reviews\"\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"form-title form-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"Reservation Table\"))), \">\"), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, this.state.select === \"Reserves\" ? ReservationTable : ReviewsTable));\n      var AdminDetails = React.createElement(\"section\", {\n        className: \"profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"admin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"form-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"Admin Portal\")), this.state.isLoading ? LoadButton : Page));\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, this.state.isLoggedOn ? AdminDetails : Login);\n    }\n  }]);\n\n  return Admin;\n}(Component);\n\nexport default Admin;","map":{"version":3,"sources":["/Users/satdey/Documents/peachykeen/peachykeen/client/src/components/Admin.js"],"names":["React","Component","LoaderButton","Link","moment","Admin","props","state","isLoggedOn","userid","password","isSuccess","isLoading","selectedRestaurant","data","restaurantData","select","getDataFromDb","setState","response","fetch","json","body","Array","from","array","push","console","log","handleChange","e","target","value","handleLogin","preventDefault","message","color","Login","email","LoadButton","RestDropDown","map","restaurant","id","Name","ReservationTable","index","Reserve","reserve","index2","user_name","user_id","date","format","ReviewsTable","Reviews","review","Page","AdminDetails"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport LoaderButton from \"./LoaderButton\";\nimport { Link } from 'react-router-dom';\nimport moment from 'moment';\n\nclass Admin extends Component {\n  state = {\n    isLoggedOn: true,\n    userid: '',\n    password: '',\n    isSuccess: false,\n    isLoading: false,\n    selectedRestaurant: \"-1\",\n    data: '',\n    restaurantData: '',\n    select: 'Reserves'\n  }\n\n  constructor(props){\n    super(props);\n    this.getDataFromDb();\n  }\n\n  getDataFromDb = async () => {\n    this.setState({ isLoading: true });\n    var response = \"\";\n    if (this.state.selectedRestaurant === null || this.state.selectedRestaurant === \"-1\"){\n      response = await fetch('/restaurants');\n      const body = await response.json();\n      this.setState({data: Array.from(body)});\n      this.setState({restaurantData: Array.from(body)});\n    }\n    else {\n      response = await fetch('/restaurants/'+this.state.selectedRestaurant);\n      const body = await response.json();\n      var array = [];\n      array.push(body);\n      this.setState({restaurantData: array});\n      console.log(array);\n    }\n    this.setState({ isLoading: false });\n    console.log(this.state.restaurantData);\n  };\n\n  handleChange = async (e) =>{\n    await this.setState({selectedRestaurant: e.target.value});\n    this.getDataFromDb();\n  }\n  handleLogin = (e) =>{\n    e.preventDefault();\n    if (this.state.userid === \"admin\" && this.state.password === \"password\"){\n      this.setState({ isLoggedOn:true,\n        message: \"Login successful! Redirecting now!\",\n        isSuccess: true,\n        color: 'success'\n      });\n      this.getDataFromDb();\n    }\n    else{\n      this.setState({\n        message: \"Incorrect user name or password\",\n        isSuccess: false,\n        color: 'danger'\n      });\n    }\n  }\n  render() {\n    var Login = <div id=\"admin-login\">\n    <div className=\"col-3 container align-self-center\">\n    <form onSubmit={this.handleLogin}>\n    <div className=\"row justify-content-center\">\n    <h5>Admin Portal</h5>\n    </div>\n    <div className=\"row justify-content-center\">\n    <span id=\"warningmessage\"> {this.state.message} </span>\n    </div>\n    <br/>\n    <div className=\"row justify-content-center\">\n    <div className=\"form-group\">\n    <label for=\"id\"><i className=\"fas fa-user-alt\"></i></label>\n    <input name = \"id\" type=\"text\" placeholder=\"User ID\" value={this.state.email} autoComplete=\"username\"\n    onChange={e => this.setState({ userid: e.target.value })} required/>\n    </div>\n    <br/>\n    </div>\n    <div className=\"row justify-content-center\">\n    <div className=\"form-group\">\n    <label for=\"password\"><i className=\"fas fa-key\"></i></label>\n    <input name=\"password\" type=\"password\" placeholder=\"Password\" value={this.state.password} autoComplete=\"current-password\"\n    onChange={e => this.setState({ password: e.target.value })} required/>\n    </div>\n    <br/>\n    </div>\n    <div className=\"row justify-content-center\">\n    <button type=\"submit\" className=\"btn btn-primary\">Login</button>\n    </div>\n    <br/>\n    </form>\n    </div>\n    </div>\n\n    var LoadButton = <LoaderButton\n    block = \"true\"\n    bssize=\"large\"\n    type=\"submit\"\n    isLoading={this.state.isLoading}\n    text=\"Login\"\n    loadingText=\"Data Loading\"\n    id = \"DataLoad\"\n    />\n    var RestDropDown = <select className = \"form-control\" value={this.state.selectedRestaurant} onChange={this.handleChange}>\n    <option value=\"-1\">All Restaurants</option>\n    {\n      this.state.data ? this.state.data.map((restaurant) => {\n        return <option key={restaurant.id} value={restaurant.id}>{restaurant.Name}</option>\n      }): \"\"\n    }\n    </select>\n    var ReservationTable = <table className=\"table table-striped table-dark\" id=\"reserveTable\">\n    <thead className=\"thead-light\">\n    <tr>\n    <th scope=\"col\">Restaurant Name</th>\n    <th scope=\"col\">User Name</th>\n    <th scope=\"col\">Email</th>\n    <th scope=\"col\">Date</th>\n    <th scope=\"col\">Time</th>\n    </tr>\n    </thead>\n    <tbody>\n    {\n      this.state.restaurantData ? this.state.restaurantData.map((restaurant, index) => {\n        return restaurant.Reserve ? restaurant.Reserve.map((reserve, index2) => {\n          return <tr key={index+index2}>\n          <th scope=\"row\">{restaurant.Name}</th>\n          <td>{reserve.user_name}</td>\n          <td>{reserve.user_id}</td>\n          <td>{moment(reserve.date).format(\"MM/DD/YY\")}</td>\n          <td>{moment(reserve.date).format(\"h:mm a\")}</td>\n          </tr>\n        }): null\n      }):null\n    }\n    </tbody>\n    </table>\n\n    var ReviewsTable = <table className=\"table table-striped table-light\" id=\"reserveTable\">\n    <thead className=\"thead-dark\">\n    <tr>\n    <th scope=\"col\">Restaurant Name</th>\n    <th scope=\"col\">User Name</th>\n    <th scope=\"col\">Date</th>\n    <th scope=\"col\">Review</th>\n    </tr>\n    </thead>\n    <tbody>\n    {\n      this.state.restaurantData ? this.state.restaurantData.map((restaurant, index) => {\n        return restaurant.Reviews ? restaurant.Reviews.map((review, index2) => {\n          return <tr key={index+index2}>\n          <th scope=\"row\">{restaurant.Name}</th>\n          <td>{review.user_name}</td>\n          <td>{moment(review.date).format(\"MM/DD/YY\")}</td>\n          <td>{review.review}</td>\n          </tr>\n        }): null\n      }):null\n    }\n    </tbody>\n    </table>\n\n    var Page = <React.Fragment>\n    <div className=\"row col-6\">\n    {RestDropDown}\n    </div>\n    <div className=\"row\">\n    <div className=\"col-6\">\n    <Link onClick={e => this.setState({ select: \"Reserves\" })}>\n    <h4 className=\"form-title form-link\">Reservation Table</h4>\n    </Link>\n    </div>\n    <div className=\"col6\">\n    <Link onClick={e => this.setState({ select: \"Reviews\" })}>\n    <h4 className=\"form-title form-link\">Reservation Table</h4>\n    </Link>\n    </div>>\n    </div>\n    <div className=\"row\">\n    { this.state.select === \"Reserves\" ? ReservationTable : ReviewsTable}\n    </div>\n    </React.Fragment>\n\n    var AdminDetails = <section className=\"profile\">\n    <div className=\"admin\">\n    <div className=\"row\">\n    <h3 className=\"form-title\">Admin Portal</h3>\n    </div>\n    {this.state.isLoading ? LoadButton : Page}\n    </div>\n    </section>\n\n    return (\n      <div className=\"App\">\n      { this.state.isLoggedOn ? AdminDetails : Login }\n      </div>\n\n    );\n  }\n}\n\nexport default Admin;\n"]},"metadata":{},"sourceType":"module"}